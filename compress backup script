. ~/ORCLDB.env

/bin/date

LOGFILE=/home/oracle/ORCLDB_rmannew_lwl0_`date +%Y%m%d`.log

/u02/app/oracle/product/19.0.0.0/dbhome_1/bin/rman target / LOG $LOGFILE <<EOF

run {
  ALLOCATE CHANNEL DISK1 DEVICE TYPE DISK FORMAT '/db_backup/ORCLDB_BCK/FULL_%d_%U_%s_%T.bck';
  ALLOCATE CHANNEL DISK2 DEVICE TYPE DISK FORMAT '/db_backup/ORCLDB_BCK/FULL_%d_%U_%s_%T.bck';
  ALLOCATE CHANNEL DISK3 DEVICE TYPE DISK FORMAT '/db_backup/ORCLDB_BCK/FULL_%d_%U_%s_%T.bck';
  ALLOCATE CHANNEL DISK4 DEVICE TYPE DISK FORMAT '/db_backup/ORCLDB_BCK/FULL_%d_%U_%s_%T.bck';

  CONFIGURE COMPRESSION ALGORITHM 'MEDIUM';
  CONFIGURE DEVICE TYPE DISK BACKUP TYPE TO COMPRESSED BACKUPSET;

  BACKUP AS COMPRESSED BACKUPSET TAG='BLevel0' SECTION SIZE 64G INCREMENTAL LEVEL 0 DATABASE PLUS ARCHIVELOG;

  BACKUP AS COMPRESSED BACKUPSET ARCHIVELOG ALL NOT BACKED UP 1 TIMES 
    FORMAT '/db_backup/ORCLDB_BCK/ARC_%d_%U_%s_%T.bck' DELETE INPUT;

  BACKUP CURRENT CONTROLFILE FORMAT '/db_backup/ORCLDB_BCK/CNTRL_%d_%s_%p_%T.bck';
  BACKUP SPFILE FORMAT '/db_backup/ORCLDB_BCK/SPFILE_%d_%s_%p_%T.bck';

  RELEASE CHANNEL DISK1;
  RELEASE CHANNEL DISK2;
  RELEASE CHANNEL DISK3;
  RELEASE CHANNEL DISK4;
}
EOF
